{% extends "base.html" %}
  {% block body %}
  <div class="container">

    <h5 class="submenu"><i class="fas fa-home"></i> Control Panel</h5>

    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Controller</th>
          <th scope="col">Status</th>
        </tr>
      </thead>
      <tbody>
        <tr ondblclick="location.href='{{ url_for("detail", id=1) }}'">
          <td>1</td>
          <td>Hydroponic 1</td>
          <td><span class="badge badge-pill badge-success handler"><span>ON</span> <i class="fas fa-check"></i></span></td>
        </tr>
        <tr>
          <td>2</td>
          <td>Hydroponic 2</td>
          <td><span class="badge badge-pill badge-danger handler"><span>OFF</span> <i class="fas fa-times"></i></span></td>
        </tr>
      </tbody>
    </table>

    <div  class="footer">
      <p>Simple irrigation control system with raspberry pi</p>
    </div>

  </div><!-- /.container -->

  <style type="text/css">
    tr{
      text-align: center;
    }
    .submenu{
      text-align: center;
    }
    .footer {
      position: absolute;
      right: 0;
      bottom: 0;
      left: 0;
      padding: 1rem;
      background-color: #efefef;
      text-align: center;
    }
    .footer p{
      font-size: .8rem;
    }
    </style>
  {% endblock %}

  {% block javascript %}
    <script type="text/javascript">
      // change status on/off
      $('.handler').click(function(){
        // get status for front-end change
        var status = $(this).children().text();
        // get id for back-end change
        var id = $(this).parent().prev().prev().text();
        if(status == 'ON'){
          $(this).toggleClass('badge-success badge-danger');
          $(this).html('<span>OFF</span> <i class="fas fa-times"></i>');
        }
        else{
          $(this).toggleClass('badge-danger badge-success');
          $(this).html('<span>ON</span> <i class="fas fa-check"></i>');
        }
      });
    </script>
  {% endblock %}


